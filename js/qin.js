;(function($){$.extend($.easing,{easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;}});$.fn.qin=function(options){var defaults={offset:22,duration:500,recline:0.1};var opt=$.extend({},defaults,options);return this.each(function(){var $ele=$(this);fillSpan($ele);stringAnimate($ele,opt);});};function fillSpan($ele){var baseContent=$ele.html();var content='';for(var i=0,len=baseContent.length;i<len;i++){content+='<span>'+baseContent.substr(i,1)+'</span>'}
    $ele.html(content);var positionArr=[];$ele.children('span').each(function(){var $span=$(this);var position=$span.position();positionArr.push(position);$span.css({top:position.top+"px",left:position.left+"px"});setTimeout(function(){$span.css("position","absolute");},0);});$ele.data("stringPosition",positionArr);}
    function stringAnimate($ele,opt){var positionArr=$ele.data("stringPosition");var startX=0;var startY=0;$ele.mouseenter(function(ex){var offset=$ele.offset();startX=ex.pageX-offset.left;startY=ex.pageY-offset.top;});$ele.mousemove(function(ex){var offset=$ele.offset();var xPos=ex.pageX-offset.left;var yPos=ex.pageY-offset.top;var offsetY=yPos-startY;if(Math.abs(offsetY)>opt.offset){return;}
        var ifDown=offsetY>0;$ele.children("span").each(function(index){var $span=$(this);var position=positionArr[index];var reclineNum=Math.abs(xPos-position.left)*opt.recline;reclineNum*=ifDown?1:(-1);var resultY=position.top+offsetY-reclineNum;if(ifDown&&resultY<position.top){resultY=position.top;}
        else if(!ifDown&&resultY>position.top){resultY=position.top;}
            $span.css({top:resultY+"px"});});});$ele.mouseleave(function(){$ele.children("span").each(function(index){$(this).stop(true,false).animate({top:positionArr[index].top+"px"},{duration:opt.duration,easing:"easeOutElastic"});});});};})(jQuery);